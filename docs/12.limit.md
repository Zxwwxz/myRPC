# 十二、限流

## 简介
    保护有限的资源，排队，拒绝
    
## 计数器限流
    单位时间内进行计数，大于最大值，进行拒绝，超过时间，重置计数
    流量毛刺不均匀
     
## 漏桶
    水桶大小固定，流出速率固定，满了溢出
    整体控制平稳，无法解决突发流量

## 令牌桶
    水桶大小固定，流入速率固定，桶里有就处理
    整体控制平稳，解决突发流量
    
## time/rate
    参数：
        每秒分发多少令牌到桶中
        桶中最大可存多少令牌
    方法：
        Wait/WaitN：当没有可用或足够的令牌时，将阻塞等待
        Allow/AllowN：当没有可用或足够的事件时，返回false
        Reserve/ReserveN 当没有可用或足够的事件时，返回要等待多久      