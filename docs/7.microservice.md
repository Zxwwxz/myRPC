#七、微服务

##框架
    意义：性能，稳定性，效率
    共性：
        客户端：
            通讯（连接，发包，收包，超时控制，粘包半包），
            传输（序列化，反序列化），限流熔断，负载均衡，服务发现
        服务端：
            连接管理，传输（序列化，反序列化），
            请求路由，日志组件，追踪监控，服务注册
            
##http2
    改进：
    多路复用：串行阻塞-》并行发送返回
    二进制分帧：文本-》二进制
    首部压缩：头部名称-》头部索引，哈夫曼压缩，不每次带头
    服务器推送
    使用https，默认http2
    协商：
    Upgrade机制：客户端支持主动发起，服务器看是否支持
    ALP机制：客户端将支持的发起，服务端选择
    加密：
    明文：信息不安全，容易被截取，容易被篡改
    对称：加密解密秘钥相同，性能好，秘钥不好传递
    非对称：加密解密秘钥不相同，性能差，安全性好，私钥加密公钥解，公钥加密私钥解，私钥+算法-》公钥
    浏览器                               服务器
    HTTPS访问--》   建立SSL
                              《-  公钥A，私钥D
    生成随机数（对钥B）   
    A-》B加密得到秘钥C  -》      
                                 D-》C解密得到B 
                 对钥B进行通信       
    中间人攻击：中间人获取服务器公钥，自己生成公钥给客户端，得到对钥B
    关键：客户端不知道公钥是否属于服务器                                  
    基于数字证书：
    服务端：
    服务端信息+服务端公钥 --Hash算法--》 信息摘要（md5） --认证中心的私钥--》 数字签名
    服务器信息+服务端公钥+数字签名=数字证书（发给客户端）
    客户端：
    数字证书 --认证中心的公钥--》 信息摘要
    服务端信息+服务端公钥 --Hash算法--》 信息摘要2
    判断信息摘要 == 信息摘要2
    
##grpc
    基于http2，IDL使用protobuf
    protoc proto-gen-go grpc
    protoc -I（pb里面有导包的路径，可多个） --go_out=plugins=grpc:.（输出的路径） xxx.proto
    
    